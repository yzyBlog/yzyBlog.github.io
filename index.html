<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="我的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="我的博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="我的博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>我的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">我的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">一天进步一点</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/09/24/菊花茶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zongyi Yin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blog_photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/09/24/菊花茶/" itemprop="url">百华贡菊</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-09-24T10:56:10+08:00">
                2020-09-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>公司简介：<br>安徽立态农业科技发展有限公司成立于2017年02月09日，注册地位于安徽省安庆市宜秀区大龙山镇百华社区综合办公楼，法定代表人为齐燕。经营范围包括农业科技开发推广与技术咨询服务；休闲农业的开发与经营；箬叶（粽叶）、农副产品、土特产品种植、收购、加工、销售；食品销售。（依法须经批准的项目，经相关部门批准后方可开展经营活动）</p>
<p>食品经营许可证：</p>
<p><img src="https://img-blog.csdnimg.cn/20200924102715288.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zOTQ2NjQ5Mw==,size_16,color_FFFFFF,t_70" alt="1"></p>
<p>产品价格：<br><img src="https://img-blog.csdnimg.cn/20200924101752582.jpg" alt="1"></p>
<p>产品展示：<br><img src="https://img-blog.csdnimg.cn/20200924102924950.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zOTQ2NjQ5Mw==,size_16,color_FFFFFF,t_70" alt="1"><br><img src="https://img-blog.csdnimg.cn/20200924102924857.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zOTQ2NjQ5Mw==,size_16,color_FFFFFF,t_70" alt="1"><br><img src="https://img-blog.csdnimg.cn/2020092410292547.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zOTQ2NjQ5Mw==,size_16,color_FFFFFF,t_70" alt="1"><br><img src="https://img-blog.csdnimg.cn/20200924102925264.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zOTQ2NjQ5Mw==,size_16,color_FFFFFF,t_70" alt="1"><br><img src="https://img-blog.csdnimg.cn/20200924111845992.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zOTQ2NjQ5Mw==,size_16,color_FFFFFF,t_70" alt="1"></p>
<p>▼菊花茶的功效与作用</p>
<p>1、清热解火、消暑。菊花茶是最佳的降火良药，比如像因为干燥火旺而导致的痤疮、喉咙发炎、外感风热、头痛、口腔溃疡等症，只要适量的饮用菊花茶就能有效的达到降火的作用。</p>
<p>2、防止眼睛疲劳。平常就可以泡一杯菊花茶来喝，能使眼睛疲劳的症状消退，如果每天喝三到四杯的菊花茶，对恢复视力也有帮助。</p>
<p>3、明目养神。日常生活中多喝菊花茶不仅能够明目，还能够起到养神的作用，对于经常加班、熬夜的上班族可要多喝一些哦，绝对是有益处的哦。</p>
<p>4、防止辐射。日常生活中多喝菊花茶有助于防止辐射，对于大部分的上班族而言，经常对着电脑过久的话，就应该多喝菊花茶，这样能够抵触电脑的辐射。</p>
<p>5、杀菌消炎。多喝菊花茶能够帮助人体对抗多重病毒、细菌，能够达到很好的抑制的作用。</p>
<p>6、消除眼睛浮肿。对于经常熬夜的朋友而言，早上起床后眼睛会出现浮肿的现象，可以用菊花茶来消除浮肿，用棉签蘸取适量的菊花茶，涂于眼睛的四周，能够起到消除浮肿的作用。</p>
<p>7、抗衰老。经常喝菊花茶还用抗衰老的作用哦，菊花茶也是一种保健茶，日常生活中可以多喝些。</p>
<p>▼菊花茶的禁忌人群</p>
<p>1、孕妇</p>
<p>菊花茶性寒、味甘，有极好的祛除火气之效，但孕妇自身免疫力低下、脾胃较为虚弱，食用菊花茶容易刺激肠胃，引起肚疼腹泻等症状，不利于胎儿的健康成长。</p>
<p>2、过敏体质者</p>
<p>在我们的现实生活中有人会对菊花茶过敏，如果喝了菊花茶就会引起皮肤红肿、红疹等过敏现象。所以那些过敏体质的人喝菊花茶反而会有副作用，对自己的健康不利。</p>
<p>3、寒性体质者</p>
<p>寒性体质者畏寒怕冷、身体孱弱、脾胃虚弱、免疫力低下，即使夏季也会有手脚冰凉、腹泻肠胃不适等症状，菊花茶性寒，只会加重其症状，对健康不利。</p>
<p>4、老人及儿童</p>
<p>也许大家认为老人喝菊花茶可以降血压、胆固醇，夏季食用并无大碍，但老人消化功能减退、脾胃较为虚弱，喝菊花茶有引起肠胃疾病的可能性，老人需慎重。</p>
<p>小孩处在生长发育的高峰期，阳气正当时，喝菊花茶有削减阳气之效，最好禁止食用。</p>
<p>5、伤寒感冒者</p>
<p>一般情况下，伤寒感冒者都是因为着凉引起的，而菊花茶的属性决定此种感冒患者不适合 喝，另外，感冒并伴有咽喉炎者更加不能喝菊花茶了。</p>
<p>因为菊花茶有刺激胃酸分泌，加重咽喉炎症的作用，延缓患者复原的时间、降低复原的质量。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/23/tab_change_react/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zongyi Yin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blog_photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/23/tab_change_react/" itemprop="url">react实现tab切换</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-23T16:48:55+08:00">
                2018-03-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="react实现tab切换"><a href="#react实现tab切换" class="headerlink" title="react实现tab切换"></a>react实现tab切换</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">import React from &apos;react&apos;;</div><div class="line">import &apos;./tabChange.less&apos;</div><div class="line"></div><div class="line">class TabChange extends React.Component&#123;</div><div class="line">	constructor(props) &#123;</div><div class="line">    	super(props);</div><div class="line">    	this.state = &#123;</div><div class="line">    		tab: &#123;</div><div class="line">    			current_index: 0,</div><div class="line">    		&#125;,</div><div class="line">    	&#125;;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	tabClick = (num) =&gt; &#123;</div><div class="line">		this.setState(&#123;</div><div class="line">			tab: Object.assign(</div><div class="line">				this.state.tab, &#123;</div><div class="line">					current_index: num,</div><div class="line">				&#125;,</div><div class="line">			),</div><div class="line">		&#125;);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	render() &#123;</div><div class="line">		const state = this.state;</div><div class="line">        const currentIndex = state.tab.current_index;</div><div class="line">		return(</div><div class="line">			&lt;div className=&quot;settle-wrap&quot;&gt;</div><div class="line">				&lt;ul className=&quot;settle-header&quot;&gt;</div><div class="line">					&lt;li onClick=&#123;() =&gt; this.tabClick(0)&#125; className=&#123;currentIndex === 0 ? &apos;active&apos; : &apos;&apos;&#125;&gt;first&lt;/li&gt;</div><div class="line">					&lt;li onClick=&#123;() =&gt; this.tabClick(1)&#125; className=&#123;currentIndex === 1 ? &apos;active&apos; : &apos;&apos;&#125;&gt;second&lt;/li&gt;</div><div class="line">					&lt;li onClick=&#123;() =&gt; this.tabClick(2)&#125; className=&#123;currentIndex === 2 ? &apos;active&apos; : &apos;&apos;&#125;&gt;third&lt;/li&gt;</div><div class="line">				&lt;/ul&gt;</div><div class="line">				&lt;div className=&#123;currentIndex === 0 ? &apos;&apos; : &apos;hidden&apos;&#125;&gt;</div><div class="line">                    第一帧</div><div class="line">                &lt;/div&gt;</div><div class="line">                &lt;div className=&#123;currentIndex === 1 ? &apos;&apos; : &apos;hidden&apos;&#125;&gt;</div><div class="line">                    第二帧</div><div class="line">                &lt;/div&gt;</div><div class="line">                &lt;div className=&#123;currentIndex === 2 ? &apos;&apos; : &apos;hidden&apos;&#125;&gt;</div><div class="line">                    第三帧</div><div class="line">                &lt;/div&gt;</div><div class="line">			&lt;/div&gt;</div><div class="line">		);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">export default TabChange;</div></pre></td></tr></table></figure>
<h4 id="tabChange-less"><a href="#tabChange-less" class="headerlink" title="tabChange.less"></a>tabChange.less</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">.settle-wrap &#123;</div><div class="line">	background: #f7f7f7;</div><div class="line">    .hidden &#123;</div><div class="line">        display: none;</div><div class="line">    &#125;</div><div class="line">    .settle-header &#123;</div><div class="line">        border-bottom: 1px solid #f2f2f2;</div><div class="line">        height: 50px;</div><div class="line">        background: #f7f7f7;</div><div class="line">        li &#123;</div><div class="line">            display: inline-block;</div><div class="line">            margin: 0 0 0 48px;</div><div class="line">            padding-bottom: 4px;</div><div class="line">            font-size: 20px;</div><div class="line">            color: #23344b;</div><div class="line">            cursor: pointer;</div><div class="line">        </div><div class="line">            &amp;.active &#123;</div><div class="line">                border-bottom: 2px solid #2c9fc0;</div><div class="line">                color: #2c9fc0;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            &amp;:first-child &#123;</div><div class="line">                margin-left: 0;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/15/react_timestamp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zongyi Yin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blog_photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/15/react_timestamp/" itemprop="url">时间戳转换</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-15T11:01:32+08:00">
                2018-03-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="时间戳转换"><a href="#时间戳转换" class="headerlink" title="时间戳转换"></a>时间戳转换</h4><p>后端返回前端日期时间，一般给你的都是时间戳，然后前端展示需要转换成需要格式。以下是我开发中常遇到需要转换成的格式，看代码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">class DateApi &#123;</div><div class="line">    /**</div><div class="line">     * 将输入的毫秒字符串or毫秒数转换成指定的字符串格式</div><div class="line">     * @param &#123;string&#125; msStr 毫秒字符串 or 毫秒数</div><div class="line">     * @param &#123;string&#125; format yyyy-MM-dd or yyyy-MM-dd hh:mm:ss</div><div class="line">     * @return &#123;string&#125; 转换后的字符串</div><div class="line">     */</div><div class="line">    static format(msStr, format) &#123;</div><div class="line">        const date = new Date(msStr / 1);</div><div class="line">        let fmt = format;</div><div class="line"></div><div class="line">        const obj = &#123;</div><div class="line">            &apos;M+&apos;: date.getMonth() + 1, // 月份</div><div class="line">            &apos;d+&apos;: date.getDate(), // 日</div><div class="line">            &apos;h+&apos;: date.getHours(), // 小时</div><div class="line">            &apos;m+&apos;: date.getMinutes(), // 分</div><div class="line">            &apos;s+&apos;: date.getSeconds(), // 秒</div><div class="line">            &apos;q+&apos;: Math.floor((date.getMonth() + 3) / 3), // 季度</div><div class="line">            S: date.getMilliseconds(), // 毫秒</div><div class="line">        &#125;;</div><div class="line">        if (/(y+)/.test(fmt)) &#123;</div><div class="line">            fmt = fmt.replace(RegExp.$1, (String(date.getFullYear())).substr(4 - RegExp.$1.length));</div><div class="line">        &#125;</div><div class="line">        const keys = Object.keys(obj);</div><div class="line">        for (let i = 0; i &lt;= keys.length; i += 1) &#123;</div><div class="line">            const k = keys[i];</div><div class="line">            if (new RegExp(`($&#123;k&#125;)`).test(fmt)) &#123;</div><div class="line">                fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (obj[k]) : ((`00$&#123;obj[k]&#125;`).substr((String(obj[k])).length)));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return fmt;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 获得传入的秒字符串msStr距离现在时间的字符串，格式为 昨天 今天 明天 当前年3月4日 其余2000-01-01</div><div class="line">     * @param &#123;string&#125; msStr 毫秒字符串</div><div class="line">     * @return &#123;string&#125; 可以显示用的字符串</div><div class="line">     */</div><div class="line">    static format2(msStr, showYear) &#123;</div><div class="line">        let ms = new Date(DateApi.format(msStr, &apos;yyyy/MM/dd&apos;)).getTime() / 1000;</div><div class="line">        const now = new Date(DateApi.format(new Date().getTime(), &apos;yyyy/MM/dd&apos;)).getTime() / 1000;</div><div class="line">        ms = now - ms;</div><div class="line"></div><div class="line">        const min = 60;</div><div class="line">        const hour = 60 * min;</div><div class="line">        const day = 24 * hour;</div><div class="line"></div><div class="line">        if (ms === 0) &#123;</div><div class="line">            return &apos;今天&apos;;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        if (ms === day) &#123;</div><div class="line">            return &apos;昨天&apos;;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        if (ms === -day) &#123;</div><div class="line">            return &apos;明天&apos;;</div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line">        const date = new Date((msStr / 1));</div><div class="line">        const nowYear = new Date().getFullYear();</div><div class="line">        const year = date.getFullYear();</div><div class="line">        const month = date.getMonth() + 1;</div><div class="line"></div><div class="line">        if (showYear === false &amp;&amp; year === nowYear) &#123;</div><div class="line">            return `$&#123;month&#125;月$&#123;date.getDate()&#125;日`;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return `$&#123;date.getFullYear()&#125;年$&#123;month&#125;月$&#123;date.getDate()&#125;日`;</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">    *获取当前天数之前或者之后的日期</div><div class="line">    *@num 之前或者之后多少天数 - 表示之前</div><div class="line">    */</div><div class="line">    static getDate(num, format) &#123;</div><div class="line">        const today = new Date();</div><div class="line">        const targetday = today.getTime() + (1000 * 60 * 60 * 24 * num);</div><div class="line">        const target = new Date();</div><div class="line">        target.setTime(targetday);</div><div class="line">        if (format) &#123;</div><div class="line">            return this.format(target.getTime(), format);</div><div class="line">        &#125;</div><div class="line">        return target;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">module.exports = DateApi;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/14/timechange/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zongyi Yin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blog_photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/14/timechange/" itemprop="url">react秒转换成分</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-14T11:07:36+08:00">
                2018-03-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="react秒转换成分"><a href="#react秒转换成分" class="headerlink" title="react秒转换成分"></a>react秒转换成分</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">class DurationApi &#123;  </div><div class="line">    /**  </div><div class="line">     * 将输入的秒数  </div><div class="line">     * @return &#123;string&#125; 转换后的01:23  </div><div class="line">     */  </div><div class="line">    static format(ms) &#123;  </div><div class="line">        let fmt = &apos;&apos;;  </div><div class="line">        let minute = parseInt(ms, 10);  </div><div class="line">        let second = 0;  </div><div class="line">  </div><div class="line">        if (minute &lt;= 60) &#123;  </div><div class="line">            fmt = minute &lt; 10 ? `0$&#123;minute&#125;` : minute;  </div><div class="line">        &#125; else &#123;  </div><div class="line">            second = Math.floor(minute / 60);  </div><div class="line">            second = second &lt; 10 ? `0$&#123;second&#125;` : second;  </div><div class="line">            minute = Math.floor(minute % 60);  </div><div class="line">            minute = minute &lt; 10 ? `0$&#123;minute&#125;` : minute;  </div><div class="line">            fmt = `$&#123;second&#125;:$&#123;minute&#125;`;  </div><div class="line">        &#125;  </div><div class="line">  </div><div class="line">        return fmt;  </div><div class="line">    &#125;  </div><div class="line">&#125;  </div><div class="line">  </div><div class="line">module.exports = DurationApi;</div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/11/border-1px/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zongyi Yin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blog_photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/11/border-1px/" itemprop="url">适配移动端1像素边框</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-11T18:48:52+08:00">
                2018-02-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="适配移动端1像素边框"><a href="#适配移动端1像素边框" class="headerlink" title="适配移动端1像素边框"></a>适配移动端1像素边框</h3><p>a.直接切图解决<br>b.实现适配移动端1px边框，主要是根据设备的dpr来对边框进行缩放处理，CSS写法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">.border-1px&#123;</div><div class="line">    position: relative;</div><div class="line">&#125;</div><div class="line">.border-1px::after&#123;</div><div class="line">    display: block;</div><div class="line">    position: absolute;</div><div class="line">    left: 0;</div><div class="line">    bottom: 0;</div><div class="line">    width: 100%;</div><div class="line">    border-bottom: 1px solid rgb(217,217,217);</div><div class="line">    content: &apos; &apos;;</div><div class="line">&#125;</div><div class="line">@media (-webkit-min-device-pixel-ratio: 1.5), (min-device-pixel-ratio: 1.5) &#123;</div><div class="line">    .border-1px::after &#123;</div><div class="line">      -webkit-transform: scaleY(0.7);</div><div class="line">      transform: scaleY(0.7);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">@media (-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2) &#123;</div><div class="line">    .border-1px::after &#123;</div><div class="line">      -webkit-transform: scaleY(0.5);</div><div class="line">      transform: scaleY(0.5);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/15/jcanvas/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zongyi Yin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blog_photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/15/jcanvas/" itemprop="url">jcanvas实现图片上传</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-15T14:29:55+08:00">
                2018-01-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="jcanvas"><a href="#jcanvas" class="headerlink" title="jcanvas"></a>jcanvas</h3><p>官网：<a href="https://projects.calebevans.me/jcanvas/" target="_blank" rel="external">https://projects.calebevans.me/jcanvas/</a><br>中文翻译：<a href="http://asprain.cn/jCanvas/p843.htm" target="_blank" rel="external">http://asprain.cn/jCanvas/p843.htm</a></p>
<h4 id="具体实现："><a href="#具体实现：" class="headerlink" title="具体实现："></a>具体实现：</h4><p>需要引入jcanvas.min.js，exif.js。 exif.js是修正图片带有exif的orientation信息的时候，在安卓上没办法正常显示的问题。<br>html:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;canvas-area&quot;&gt;</div><div class="line">    &lt;img class=&quot;fake-img&quot; src=&quot;http://pic03.babytreeimg.com/foto3/common_photo/original/2018/0115/c8f6c06398978870.png&quot; alt=&quot;&quot;&gt;</div><div class="line">    &lt;canvas class=&quot;cv&quot;&gt;&lt;/canvas&gt;</div><div class="line">    &lt;input type=&quot;file&quot; class=&quot;upload-file&quot; style=&quot;display: none;&quot;&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></p>
<p>css:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">.canvas-area &#123;</div><div class="line">  position: relative;</div><div class="line">  width: 4.74rem;</div><div class="line">  height: 4.74rem;</div><div class="line">  overflow: hidden;</div><div class="line">  border: solid 2px #000d41;</div><div class="line">&#125;</div><div class="line">.canvas-area .fake-img &#123;</div><div class="line">  position: absolute;</div><div class="line">  top: 0;</div><div class="line">  left: 0;</div><div class="line">  z-index: 2;</div><div class="line">  width: 100%;</div><div class="line">  height: 100%;</div><div class="line">&#125;</div><div class="line">.cv&#123;</div><div class="line">	width: 100%;</div><div class="line">	height: 100%;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>js:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div></pre></td><td class="code"><pre><div class="line">var $fileTag = $(&apos;.upload-file&apos;),</div><div class="line">		oCanvas = $(&apos;.cv&apos;),</div><div class="line">		oUploadBtn = $(&apos;.fake-img&apos;);</div><div class="line">	var c_width = oUploadBtn.width(),</div><div class="line">		c_height = oUploadBtn.height();</div><div class="line"> 	var img_times = 1;</div><div class="line">	var c_center = c_width;</div><div class="line">	var _exifInfo = &#123;&#125;;</div><div class="line">	//让图片高清显示</div><div class="line">	</div><div class="line">	oCanvas.attr(&#123;&apos;width&apos;:c_width*img_times,&apos;height&apos;:c_width*img_times&#125;);</div><div class="line">	oUploadBtn.click(function () &#123;</div><div class="line">		g_upload_img();</div><div class="line">	&#125;);</div><div class="line">	/*图片上传*/</div><div class="line">	function g_upload_img() &#123;</div><div class="line">		$fileTag.click();</div><div class="line">		$fileTag[0].onchange = function () &#123;</div><div class="line">			var file = $fileTag[0].files[0];</div><div class="line">			var fileReader = new FileReader();</div><div class="line">			fileReader.onloadend = function () &#123;</div><div class="line">				if (fileReader.readyState == fileReader.DONE) &#123;</div><div class="line">					var aimg=new Image();</div><div class="line">					aimg.src = fileReader.result;</div><div class="line">					$(aimg).load(function() &#123;</div><div class="line">						EXIF.getData(this, function()&#123;</div><div class="line">							_exifInfo = EXIF.getAllTags(this);</div><div class="line">						&#125;);</div><div class="line"></div><div class="line">						var _rotate = 0;</div><div class="line">						var _DragToAxis = null;</div><div class="line">						// exif.js修正图片带有exif的orientation信息的时候，在安卓上没办法正式显示的问题。假如图片是ios及数码相机拍摄，那么它就会带有exif信息，其中一个叫orientation的方向信息，这个方向是你拍摄的方向，假如有这个方向的话，在pc，安卓及ios上面的显示都不一样。</div><div class="line">						switch (_exifInfo.Orientation) &#123;</div><div class="line">							case 7:</div><div class="line">							case 8:</div><div class="line">								_rotate = -90;</div><div class="line">								break;</div><div class="line">							case 3:</div><div class="line">							case 4:</div><div class="line">								_rotate = 180;</div><div class="line">								break;</div><div class="line">							case 5:</div><div class="line">							case 6:</div><div class="line">								_rotate = 90;</div><div class="line">								break;</div><div class="line">						&#125;</div><div class="line"></div><div class="line">						var max_width,max_height;					</div><div class="line">						max_width = c_width &gt; aimg.width ? aimg.width:c_width;</div><div class="line">						max_height = c_height &gt; aimg.height ? aimg.height:c_height;</div><div class="line">						var c_width = oUploadBtn.width(),</div><div class="line">							c_height = oUploadBtn.height();</div><div class="line">							//ratiow：上传的图片的宽度与canvas宽度的比例</div><div class="line">							//ratioh：上传的图片的高度与canvas高度的比例</div><div class="line">							//判断上传的图片的宽度和高度哪个大，哪个大就以这个大小作为画布的高度和宽度。上传的图片按照小的那边等比缩放，缩放到与框的宽度或高度相等。</div><div class="line">						var ratiow  = aimg.width/c_width,</div><div class="line">							ratioh = aimg.height/c_height;</div><div class="line">						var c_h = c_height, c_w = c_width,ratioend=1;</div><div class="line">						if(ratiow&gt;ratioh)</div><div class="line">						&#123;</div><div class="line">							c_height = ratiow*c_height;</div><div class="line">							c_width = aimg.width;</div><div class="line">							ratioend = ratiow;</div><div class="line">							scale_c = 1/ratioh;</div><div class="line">						&#125;</div><div class="line">						else&#123;</div><div class="line">							c_width = ratioh*c_width;</div><div class="line">							c_height = aimg.height;</div><div class="line">							ratioend = ratioh;</div><div class="line">							scale_c = 1/ratiow;</div><div class="line">						&#125;</div><div class="line">						if(c_width&lt;=c_w&amp;&amp;c_height&lt;=c_h)</div><div class="line">						&#123;</div><div class="line">							c_width = c_w;</div><div class="line">							c_height = c_h;</div><div class="line">							ratioend = 1;</div><div class="line">							scale_c = 1; </div><div class="line">						&#125;</div><div class="line">						oCanvas.attr(&#123;&apos;width&apos;:c_width*1,&apos;height&apos;:c_height*1&#125;);</div><div class="line">						// 永久删除图层</div><div class="line">						oCanvas.removeLayer(&apos;myBox&apos;).drawLayers();</div><div class="line">						oCanvas.clearCanvas().drawImage(&#123;</div><div class="line">							layer: true,//jCanvas绘制的东西是否应该加为一个图层</div><div class="line">							name: &apos;myBox&apos;,//关联到图层的名称</div><div class="line">							source: fileReader.result,//要绘制的图像的源</div><div class="line">							x: c_width/2,//一个形状在画布上的x位置</div><div class="line">							y: c_height/2,//一个形状在画布上的y位置</div><div class="line">							width: c_w*ratiow*ratioend,//形状的宽度</div><div class="line">							height: c_h*ratioh*ratioend,//形状的高度</div><div class="line">							draggable: true,//是否可拖曳</div><div class="line">							rotate: _rotate,//旋转的角度</div><div class="line">							scale: scale_c//画布的宽度和高度的倍数（用于缩放）</div><div class="line">						&#125;);</div><div class="line"></div><div class="line">					&#125;)</div><div class="line">				&#125;</div><div class="line">			&#125;;</div><div class="line">			fileReader.readAsDataURL(file);</div><div class="line">		&#125;;</div><div class="line">	&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/05/localStorage-sessionStorage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zongyi Yin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blog_photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/05/localStorage-sessionStorage/" itemprop="url">HTML 5 Web 存储</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-05T16:01:32+08:00">
                2018-01-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在客户端存储数据<br>HTML 5 提供了两种在客户端存储数据的新方法:<br>localStorage - 没有时间限制的数据存储<br>sessionStorage - 针对一个 session 的数据存储<br>之前，这些都是由 cookie 完成的。但是 cookie 不适合大量数据的存储，因为它们由每个对服务器的请求来 传递，这使得 cookie 速度很慢而且效率也不高。<br>在 HTML 5 中，数据不是由每个服务器请求传递的，而是只有在请求时使用数据。它使在不影响网站性能的 情况下存储大量数据成为可能。<br>对于不同的网站，数据存储于不同的区域，并且一个网站只能访问其自身的数据。<br>HTML 5 使用 JavaScript 来存储和访问数据。</p>
<ul>
<li><p>localStorage 方法<br>localStorage 方法存储的数据没有时间限制。第二天、第二周或下一年之后，数据依然可用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE HTML&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;script type=&quot;text/javascript&quot;&gt; </div><div class="line">	if (localStorage.pagecount) &#123;</div><div class="line">		localStorage.pagecount=Number(localStorage.pagecount) +1; &#125;</div><div class="line">	else &#123;</div><div class="line">		localStorage.pagecount=1;</div><div class="line">	&#125;</div><div class="line">	document.write(&quot;Visits: &quot; + localStorage.pagecount + &quot; time(s).&quot;); </div><div class="line">&lt;/script&gt;</div><div class="line">&lt;p&gt;刷新页面会看到计数器在增长。&lt;/p&gt;</div><div class="line">&lt;p&gt;请关闭浏览器窗口，然后再试一次，计数器会继续计数。&lt;/p&gt; &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>sessionStorage 方法<br>sessionStorage 方法针对一个 session 进行数据存储。当用户关闭浏览器窗口后，数据会被删除。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE HTML&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;script type=&quot;text/javascript&quot;&gt; </div><div class="line">	if (sessionStorage.pagecount) &#123;</div><div class="line">		sessionStorage.pagecount=Number(sessionStorage.pagecount) +1; &#125;</div><div class="line">	else &#123;</div><div class="line">		sessionStorage.pagecount=1;</div><div class="line">	&#125;</div><div class="line">	document.write(&quot;Visits: &quot; + sessionStorage.pagecount + &quot; time(s).&quot;); </div><div class="line">&lt;/script&gt;</div><div class="line">&lt;p&gt;刷新页面会看到计数器在增长。&lt;/p&gt;</div><div class="line">&lt;p&gt;请关闭浏览器窗口，然后再试一次，计数器已经重置了。&lt;/p&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/04/animation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zongyi Yin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blog_photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/04/animation/" itemprop="url">动画相关实现</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-04T16:48:55+08:00">
                2018-01-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一、animation-css"><a href="#一、animation-css" class="headerlink" title="一、animation.css"></a>一、animation.css</h2><h4 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h4><p><a href="https://daneden.github.io/animate.css/" target="_blank" rel="external">https://daneden.github.io/animate.css/</a></p>
<h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>animate.css是一个来自国外的CSS3动画库，它预设了抖动（shake）、闪烁（flash）、弹跳（bounce）、翻转（flip）、旋转（rotateIn/rotateOut）、淡入淡出（fadeIn/fadeOut）等多达60多种动画效果，几乎包含了所有常见的动画效果。</p>
<h4 id="兼容"><a href="#兼容" class="headerlink" title="兼容"></a>兼容</h4><p>浏览器兼容：当然是只兼容支持CSS3   animate属性的浏览器，他们分别是：IE10+、Firefox、Chrome、Opera、Safari。</p>
<h4 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h4><p>1、引入css<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;head&gt;</div><div class="line">  &lt;link rel=&quot;stylesheet&quot;</div><div class="line">  href=&quot;https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css&quot;&gt;</div><div class="line">&lt;/head&gt;</div></pre></td></tr></table></figure></p>
<p>2、html<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;h1 class=&quot;animated infinite bounce&quot; id=&quot;dowebok&quot;&gt;Example&lt;/h1&gt;</div></pre></td></tr></table></figure></p>
<p>给元素加上 class 后，刷新页面，就能看到动画效果了。animated 类似于全局变量，它定义了动画的持续时间；bounce 是动画具体的动画效果的名称，你可以选择任意的效果。<br>如果动画是无限播放的，可以添加 class infinite。<br>你也可以通过 JavaScript或jQuery给元素添加这些class，比如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$(function()&#123;</div><div class="line">    $(&apos;#dowebok&apos;).addClass(&apos;animated bounce&apos;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>当动画效果执行完成后还可以通过以下代码添加事件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(&apos;#yourElement&apos;).one(&apos;webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend&apos;, doSomething);</div></pre></td></tr></table></figure></p>
<p>有些动画效果最后会让元素不可见，比如淡出、向左滑动等等，可能你又需要将 class 删除，比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$(function()&#123;</div><div class="line">    $(&apos;#dowebok&apos;).addClass(&apos;animated bounce&apos;);</div><div class="line">    setTimeout(function()&#123;</div><div class="line">        $(&apos;#dowebok&apos;).removeClass(&apos;bounce&apos;);</div><div class="line">    &#125;, 1000);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>animate.css 的默认设置也许有些时候并不是我们想要的，所以你可以重新设置，比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#dowebok &#123;</div><div class="line">    animate-duration: 2s;    //动画持续时间</div><div class="line">    animate-delay: 1s;    //动画延迟时间</div><div class="line">    animate-iteration-count: 2;    //动画执行次数</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注意添加浏览器前缀。</p>
<hr>
<h2 id="二、velocity-js"><a href="#二、velocity-js" class="headerlink" title="二、velocity.js"></a>二、velocity.js</h2><h4 id="英文官网："><a href="#英文官网：" class="headerlink" title="英文官网："></a>英文官网：</h4><p><a href="http://velocityjs.org/" target="_blank" rel="external">http://velocityjs.org/</a></p>
<h4 id="中文文档："><a href="#中文文档：" class="headerlink" title="中文文档："></a>中文文档：</h4><p><a href="http://www.mrfront.com/docs/velocity.js/index.html" target="_blank" rel="external">http://www.mrfront.com/docs/velocity.js/index.html</a></p>
<h4 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h4><p>Velocity 是一个简单易用、高性能、功能丰富的轻量级JS动画库。它能和 jQuery 完美协作，并和$.animate()有相同的 API， 但它不依赖 jQuery，可单独使用。 Velocity 不仅包含了 $.animate() 的全部功能， 还拥有：颜色动画、转换动画(transforms)、循环、 缓动、SVG 动画、和 滚动动画 等特色功能。</p>
<p>它比 $.animate() 更快更流畅，性能甚至高于 CSS3 animation， 是 jQuery 和 CSS3 transition 的最佳组合，它支持所有现代浏览器，最低可兼容到 IE8 和 Android 2.3。</p>
<h4 id="使用方法-1"><a href="#使用方法-1" class="headerlink" title="使用方法"></a>使用方法</h4><p>1、引入js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;body&gt;</div><div class="line">    &lt;!-- dom --&gt;</div><div class="line">    &lt;div class=&quot;element&quot;&gt;&lt;/div&gt;</div><div class="line"></div><div class="line">    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js&quot;&gt;&lt;/script&gt;</div><div class="line">    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/velocity/1.5.0/velocity.min.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;/body&gt;</div></pre></td></tr></table></figure></p>
<p>2、使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// 标准写法</div><div class="line">// (为了简洁，后面的示例代码中 将直接使用 $element 来代替 jQuery 选择器)</div><div class="line">$(&quot;.element&quot;).velocity(&#123;</div><div class="line">    left: &quot;200px&quot;</div><div class="line">&#125;, &#123;</div><div class="line">    duration: 450,</div><div class="line">    delay: 1000</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// $.animate() 的写法，效果同上</div><div class="line">$(&quot;.element&quot;).delay(1000).velocity(&#123;left: &quot;200px&quot;&#125;, 450);</div></pre></td></tr></table></figure></p>
<h4 id="velocity-js基础用法"><a href="#velocity-js基础用法" class="headerlink" title="velocity.js基础用法"></a>velocity.js基础用法</h4><p>Velocity.js 可以在不引入 jQuery 的情况下单独使用。如果 你需要大部分动画效果能兼容 IE8，就必须引入 jQuery 1×。 它也可以和 Zepto 一起使用，写法和 jQuery 一样：<br>注意：使用 jQuery 时，必须在 Velocity 之前加载 jQuery<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">// 无 jQuery 或 Zepto 时，Velocity()方法挂载在 window 对象上 (window.velocity)</div><div class="line">// ( 第一个参数为原生js的dom选择器 )</div><div class="line">Velocity(document.getElementById(&quot;dummy&quot;), &#123;</div><div class="line">    opacity: 0.5</div><div class="line">&#125;, &#123;</div><div class="line">    duration: 1000</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// 使用 jQuery 或 Zepto 时</div><div class="line">$(&quot;#dummy&quot;).velocity(&#123;</div><div class="line">    opacity: 0.5</div><div class="line">&#125;, &#123;</div><div class="line">    duration: 1000</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h4 id="velocity-js参数"><a href="#velocity-js参数" class="headerlink" title="velocity.js参数"></a>velocity.js参数</h4><h5 id="参数概述和基础写法："><a href="#参数概述和基础写法：" class="headerlink" title="参数概述和基础写法："></a>参数概述和基础写法：</h5><p>Velocity 接收一组 css 属性键值对 (css map) 作为它的第一个参数，该参数作为动画效果的最终属性。第二个参数是可选参数 为动画的额外配置项。下面为参数的写法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">$element.velocity(&#123;</div><div class="line">    width: &quot;500px&quot;,        // 动画属性 宽度到 &quot;500px&quot; 的动画</div><div class="line">    property2: value2      // 属性示例</div><div class="line">&#125;, &#123;</div><div class="line">    /* Velocity 动画配置项的默认值 */</div><div class="line">    duration: 400,         // 动画执行时间</div><div class="line">    easing: &quot;swing&quot;,       // 缓动效果</div><div class="line">    queue: &quot;&quot;,             // 队列</div><div class="line">    begin: undefined,      // 动画开始时的回调函数</div><div class="line">    progress: undefined,   // 动画执行中的回调函数（该函数会随着动画执行被不断触发）</div><div class="line">    complete: undefined,   // 动画结束时的回调函数</div><div class="line">    display: undefined,    // 动画结束时设置元素的 css display 属性</div><div class="line">    visibility: undefined, // 动画结束时设置元素的 css visibility 属性</div><div class="line">    loop: false,           // 循环</div><div class="line">    delay: false,          // 延迟</div><div class="line">    mobileHA: true         // 移动端硬件加速（默认开启）</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h5 id="单一对象的参数写法："><a href="#单一对象的参数写法：" class="headerlink" title="单一对象的参数写法："></a>单一对象的参数写法：</h5><p>Velocity 也支持 single-argument 的语法，看下面示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$element.velocity(&#123;</div><div class="line">    properties: &#123; opacity: 1 &#125;,</div><div class="line">    options: &#123; duration: 500 &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// 或者：</div><div class="line">$element.velocity(&#123;</div><div class="line">    p: &#123; opacity: 1 &#125;, // 可以将 properties 简写成 p</div><div class="line">    o: &#123; duration: 500 &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h5 id="逗号分割的参数写法（类似-animate）："><a href="#逗号分割的参数写法（类似-animate）：" class="headerlink" title="逗号分割的参数写法（类似 $.animate）："></a>逗号分割的参数写法（类似 $.animate）：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$element.velocity(&#123; top: 50 &#125;, 1000);</div><div class="line">$element.velocity(&#123; top: 50 &#125;, 1000, &quot;swing&quot;);</div><div class="line">$element.velocity(&#123; top: 50 &#125;, &quot;swing&quot;);</div><div class="line">$element.velocity(&#123; top: 50 &#125;, 1000, function() &#123; alert(&quot;Hi&quot;); &#125;);</div></pre></td></tr></table></figure>
<h4 id="Properties-Map-动画属性"><a href="#Properties-Map-动画属性" class="headerlink" title="Properties Map 动画属性"></a>Properties Map 动画属性</h4><p>如果不写属性值的单位, Velocity 会将像素(px)作为默认单位<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// 等同 padding: 1px</div><div class="line">$element.velocity(&#123; padding: 1 &#125;);</div><div class="line"></div><div class="line">// 等同 padding-left: 1px, padding-right: 1px</div><div class="line">$element.velocity(&#123;</div><div class="line">    paddingLeft: 1,</div><div class="line">    paddingRight: 1</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// 但你不能这样写！因为这样相当于为 padding 赋了多个值</div><div class="line">$element.velocity(&#123; padding: &quot;1 1 1 1&quot; &#125;); // error</div></pre></td></tr></table></figure></p>
<p>Velocity 在 1.2.0+ 版本里增加了对 “px, em, rem, %, deg, vw/vh” 这些单位的支持， 如果不填写属性单位 默认单位还是”px”，但 “deg” 用于 rotateZ 属性时可以省略不写。 Velocity 还支持动态计算属性值，包括 “+, -, *, /“，还可以设置元素在动画执行前的初始值，看下面示例：<br>( 注意：”rem” 只支持 IE9+，”vh/vw” 只支持 IE9+ 和 Android 4.4+ )<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$element.velocity(&#123;</div><div class="line">    top: 50,                // 等同于 &quot;50px&quot;</div><div class="line">    left: &quot;50%&quot;,</div><div class="line">    width: &quot;+=5rem&quot;,        // 每次在当前值上叠加 5rem</div><div class="line">    height: &quot;*=2&quot;           // 每次在当前值上叠乘 2</div><div class="line">    color: [&quot;#888&quot;, &quot;#000&quot;] // 每次动画执行前，color 的初始值都为&quot;#000&quot;（从&quot;#000&quot;过渡成&quot;#888&quot;）</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h4 id="Chaining-链式动画"><a href="#Chaining-链式动画" class="headerlink" title="Chaining 链式动画"></a>Chaining 链式动画</h4><p>当一个元素连续应用多个velocity()时，动画将以队列的方式执行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$element</div><div class="line">    /* 先执行宽度变为75px的动画 */</div><div class="line">    .velocity(&#123; width: 75 &#125;)</div><div class="line">    /* 等前面的宽度动画结束后，再执行高度变为0的动画 */</div><div class="line">    .velocity(&#123; height: 0 &#125;);</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="三、根据ui给的帧图实现动画"><a href="#三、根据ui给的帧图实现动画" class="headerlink" title="三、根据ui给的帧图实现动画"></a>三、根据ui给的帧图实现动画</h2><h4 id="1-steps"><a href="#1-steps" class="headerlink" title="1.steps"></a>1.steps</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&lt;!doctype html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</div><div class="line">&lt;title&gt;steps&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;style type=&quot;text/css&quot;&gt;</div><div class="line">    body&#123;</div><div class="line">        background: black;</div><div class="line">    &#125;</div><div class="line">    #sprite&#123;</div><div class="line">        width: 286px;</div><div class="line">        height: 407px;</div><div class="line">        margin: 40px auto 0;</div><div class="line">        background: url(http://pic01.babytreeimg.com/foto3/common_photo/original/2018/0103/58eeb92e97111159.png) no-repeat;</div><div class="line">        -webkit-animation: m4 2s infinite steps(50,end);</div><div class="line">        animation: m4 2s infinite steps(50,end);</div><div class="line">    &#125;</div><div class="line">    @-webkit-keyframes m4&#123;</div><div class="line">        from&#123;background-position: 0;&#125;</div><div class="line">        to &#123;background-position: -14300px;&#125;</div><div class="line">    &#125;</div><div class="line">&lt;/style&gt;</div><div class="line">&lt;body&gt;</div><div class="line">    &lt;div id=&quot;sprite&quot;&gt;</div><div class="line">        </div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h4 id="2-keyframes"><a href="#2-keyframes" class="headerlink" title="2.keyframes"></a>2.keyframes</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div></pre></td><td class="code"><pre><div class="line">&lt;!doctype html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</div><div class="line">&lt;title&gt;steps&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;style type=&quot;text/css&quot;&gt;</div><div class="line">    #sprite&#123;</div><div class="line">        width: 260px;</div><div class="line">		    height: 470px;</div><div class="line">        margin: 40px auto 0;</div><div class="line">        background: url(http://pic01.babytreeimg.com/foto3/common_photo/original/2018/0103/a758ccfc97118028.png) no-repeat;</div><div class="line">        animation: pop 1s step-end infinite;</div><div class="line">    	-webkit-animation: pop 1s step-end infinite;</div><div class="line">    &#125;</div><div class="line">    @keyframes pop &#123;</div><div class="line">	    0%,</div><div class="line">	    6.8% &#123;</div><div class="line">	        background-position: -5px -5px; </div><div class="line">	    &#125;</div><div class="line">	    7.8%,</div><div class="line">	    14.6% &#123;</div><div class="line">	        background-position: -275px -5px; </div><div class="line">	    &#125;</div><div class="line">	   </div><div class="line">	    15.6%,</div><div class="line">	    22.4% &#123;</div><div class="line">	        background-position: -545px -5px; </div><div class="line">	    &#125;</div><div class="line">	    23.4%,</div><div class="line">	    30.2% &#123;</div><div class="line">	        background-position: -815px -5px;</div><div class="line">	    &#125;</div><div class="line">	    31.2%,</div><div class="line">	    38% &#123;</div><div class="line">	        background-position: -5px -485px; </div><div class="line">	    &#125;</div><div class="line">	    39%,</div><div class="line">	    45.8% &#123;</div><div class="line">	        background-position: -275px -485px;</div><div class="line">	    &#125;</div><div class="line">	    46.8%,</div><div class="line">	    53.6% &#123;</div><div class="line">	        background-position: -545px -485px; </div><div class="line">	    &#125;</div><div class="line">	    54.6%,</div><div class="line">	    61.4% &#123;</div><div class="line">	    	background-position: -815px -485px; </div><div class="line">	    &#125;</div><div class="line">	    62.4%,</div><div class="line">	    69.2% &#123;</div><div class="line">	        background-position: -1085px -485px; </div><div class="line">	    &#125;</div><div class="line">	    70.2%,</div><div class="line">	    77% &#123;</div><div class="line">	        background-position: -5px -965px;  </div><div class="line">	    &#125;</div><div class="line">	    78%,</div><div class="line">	    84.8% &#123;</div><div class="line">	        background-position: -275px -965px; </div><div class="line">	    &#125;</div><div class="line">	    85.8%,</div><div class="line">	    92.6% &#123;</div><div class="line">	        background-position: -545px -965px; </div><div class="line">	    &#125;</div><div class="line">	    93.6%,</div><div class="line">	    100% &#123;</div><div class="line">	    	background-position: -5px -965px;  </div><div class="line">	    &#125;</div><div class="line">	&#125;</div><div class="line">	@-webkit-keyframes pop &#123;</div><div class="line">	    0%,</div><div class="line">	    6.8% &#123;</div><div class="line">	        background-position: -5px -5px; </div><div class="line">	    &#125;</div><div class="line">	    7.8%,</div><div class="line">	    14.6% &#123;</div><div class="line">	        background-position: -275px -5px; </div><div class="line">	    &#125;</div><div class="line">	   </div><div class="line">	    15.6%,</div><div class="line">	    22.4% &#123;</div><div class="line">	        background-position: -545px -5px; </div><div class="line">	    &#125;</div><div class="line">	    23.4%,</div><div class="line">	    30.2% &#123;</div><div class="line">	        background-position: -815px -5px;</div><div class="line">	    &#125;</div><div class="line">	    31.2%,</div><div class="line">	    38% &#123;</div><div class="line">	        background-position: -5px -485px; </div><div class="line">	    &#125;</div><div class="line">	    39%,</div><div class="line">	    45.8% &#123;</div><div class="line">	        background-position: -275px -485px;</div><div class="line">	    &#125;</div><div class="line">	    46.8%,</div><div class="line">	    53.6% &#123;</div><div class="line">	        background-position: -545px -485px; </div><div class="line">	    &#125;</div><div class="line">	    54.6%,</div><div class="line">	    61.4% &#123;</div><div class="line">	    	background-position: -815px -485px; </div><div class="line">	    &#125;</div><div class="line">	    62.4%,</div><div class="line">	    69.2% &#123;</div><div class="line">	        background-position: -1085px -485px; </div><div class="line">	    &#125;</div><div class="line">	    70.2%,</div><div class="line">	    77% &#123;</div><div class="line">	        background-position: -5px -965px;  </div><div class="line">	    &#125;</div><div class="line">	    78%,</div><div class="line">	    84.8% &#123;</div><div class="line">	        background-position: -275px -965px; </div><div class="line">	    &#125;</div><div class="line">	    85.8%,</div><div class="line">	    92.6% &#123;</div><div class="line">	        background-position: -545px -965px; </div><div class="line">	    &#125;</div><div class="line">	    93.6%,</div><div class="line">	    100% &#123;</div><div class="line">	    	background-position: -5px -965px;  </div><div class="line">	    &#125;</div><div class="line">	&#125;</div><div class="line">&lt;/style&gt;</div><div class="line">&lt;body&gt;</div><div class="line">    &lt;div id=&quot;sprite&quot;&gt;</div><div class="line">        </div><div class="line">    &lt;/div&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h4 id="3-JS"><a href="#3-JS" class="headerlink" title="3.JS"></a>3.JS</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html lang=&quot;en&quot;&gt;</div><div class="line">&lt;head&gt;</div><div class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</div><div class="line">	&lt;title&gt;js&lt;/title&gt;</div><div class="line">	&lt;style type=&quot;text/css&quot;&gt;</div><div class="line">	#sprite&#123;</div><div class="line">		width: 130px;</div><div class="line">		height: 235px;</div><div class="line">	&#125;</div><div class="line">&lt;/style&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">	&lt;div id=&quot;sprite&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;script type=&quot;text/javascript&quot;&gt;</div><div class="line">function animation(ele, positions, imgUrl)&#123;</div><div class="line">	ele.style.backgroundImage = &quot;url(&quot; + imgUrl +&quot;)&quot;;</div><div class="line">	ele.style.backgroundSize = &quot;675px 720px&quot;;</div><div class="line">	ele.style.backgroundRepeat = &quot;no-repeat&quot;;</div><div class="line">	</div><div class="line">	var index = 0;</div><div class="line">	</div><div class="line">	function run()&#123;</div><div class="line">		var position = positions[index].split(&quot; &quot;);</div><div class="line">		ele.style.backgroundPosition = position[0] + &quot;px &quot; + position[1] + &quot;px&quot;;</div><div class="line">		index++;</div><div class="line">		if(index &gt;= positions.length) &#123;</div><div class="line">			index = 0;</div><div class="line">		&#125;</div><div class="line">		setTimeout(run, 80);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	run();</div><div class="line">&#125;</div><div class="line"></div><div class="line">var imgUrl = &quot;http://pic01.babytreeimg.com/foto3/common_photo/original/2018/0103/a758ccfc97118028.png&quot;;</div><div class="line">var positions = [&quot;-2.5 -2.5&quot;,&quot;-137.5 -2.5&quot;,&quot;-272.5 -2.5&quot;,&quot;-407.5 -2.5&quot;,&quot;-2.5 -242.5&quot;,&quot;-137.5 -242.5&quot;,&quot;-272.5 -242.5&quot;,&quot;-407.5 -242.5&quot;,&quot;-542.5 -242.5&quot;,</div><div class="line">&quot;-2.5 -482.5&quot;,&quot;-137.5 -482.5&quot;,&quot;-272.5 -482.5&quot;];</div><div class="line">var ele = document.getElementById(&quot;sprite&quot;);</div><div class="line">animation(ele, positions, imgUrl);</div><div class="line"></div><div class="line">&lt;/script&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h4 id="4-jquery-animateSprite-js"><a href="#4-jquery-animateSprite-js" class="headerlink" title="4.jquery.animateSprite.js"></a>4.jquery.animateSprite.js</h4><h5 id="github地址："><a href="#github地址：" class="headerlink" title="github地址："></a>github地址：</h5><p><a href="https://github.com/blaiprat/jquery.animateSprite" target="_blank" rel="external">https://github.com/blaiprat/jquery.animateSprite</a></p>
<h5 id="使用方法-2"><a href="#使用方法-2" class="headerlink" title="使用方法"></a>使用方法</h5><p>使用该插件需要引入jQuery和jquery.animateSprite.js文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;script src=&quot;js/jquery.min.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script src=&quot;js/jquery.animateSprite.js&quot;&gt;&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<h5 id="HTML结构"><a href="#HTML结构" class="headerlink" title="HTML结构"></a>HTML结构</h5><p>可以使用一个<div>元素来作为雪碧图的容器。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;animation animation-2&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure></div></p>
<h5 id="CSS样式"><a href="#CSS样式" class="headerlink" title="CSS样式"></a>CSS样式</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">.animation-2 &#123;</div><div class="line">    background: url(../img/ramonaflowers_multiple.png);</div><div class="line">    width: 125px;</div><div class="line">    height: 157px;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="初始化插件"><a href="#初始化插件" class="headerlink" title="初始化插件"></a>初始化插件</h5><p>在页面DOM元素加载完毕之后，可以通过下面的方法来初始化该jQuery插件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$(&apos;.animation&apos;).animateSprite(&#123;</div><div class="line">    fps: 12,</div><div class="line">    loop: true,</div><div class="line">    animations: &#123;</div><div class="line">        walk: [0, 1, 2, 3, 4, 5, 6, 7, 8],</div><div class="line">        run: [14, 13, 12, 11, 10, 9]</div><div class="line">    &#125;,</div><div class="line">    complete: function()&#123;</div><div class="line">        alert(&apos;Sprite animation complete!&apos;);</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h5 id="配置参数"><a href="#配置参数" class="headerlink" title="配置参数"></a>配置参数</h5><ul>
<li>columns：雪碧图分为多少列，默认为10。</li>
<li>fps：定义动画的速度。</li>
<li>duration：动画的持续时间，单位毫秒。</li>
<li>complete：动画执行完毕之后的回调函数。（如果是无限循环动画不会被调用）</li>
<li>loop：是否是无限循环动画</li>
<li>autoplay：是否自动播放。</li>
<li>animations：包含多个动画的键值对对象。键是动画的名称，值是一个包含帧的数组。<h5 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h5></li>
<li><p>play：播放指定的动画。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(&apos;object&apos;).animateSprite(&apos;play&apos;, &apos;animation name&apos;)</div></pre></td></tr></table></figure>
</li>
<li><p>stop：停止播放指定的动画。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(&apos;object&apos;).animateSprite(&apos;stop&apos;)</div></pre></td></tr></table></figure>
</li>
<li><p>resume：恢复动画的播放。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(&apos;object&apos;).animateSprite(&apos;resume&apos;)</div></pre></td></tr></table></figure>
</li>
<li><p>restart：重新开始播放动画。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(&apos;object&apos;).animateSprite(&apos;restart&apos;)</div></pre></td></tr></table></figure>
</li>
<li><p>frame：播放第n帧动画。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(&apos;object&apos;).animateSprite(&apos;frame&apos;, n)</div></pre></td></tr></table></figure>
</li>
<li><p>fps：将动画的速度调整为n帧每秒。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$(&apos;object&apos;).animateSprite(&apos;fps&apos;, n)</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h2><p><a href="http://www.htmleaf.com/Demo/201604033295.html" target="_blank" rel="external">http://www.htmleaf.com/Demo/201604033295.html</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/27/lazyload/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zongyi Yin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blog_photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/27/lazyload/" itemprop="url">图片懒加载</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-27T11:01:32+08:00">
                2017-12-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="图片懒加载"><a href="#图片懒加载" class="headerlink" title="图片懒加载"></a>图片懒加载</h4><p>1.jqueryLazyload<br>下载地址：<a href="https://github.com/helijun/helijun/blob/master/plugin/lazyLoad/jquery.lazyload.js" target="_blank" rel="external">https://github.com/helijun/helijun/blob/master/plugin/lazyLoad/jquery.lazyload.js</a></p>
<h5 id="html"><a href="#html" class="headerlink" title="html"></a>html</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;section class=&quot;module-section&quot; id=&quot;container&quot;&gt;</div><div class="line">     &lt;img class=&quot;lazy-load&quot; data-original=&quot;lazy_load.jpg&quot; width=&quot;640&quot; height=&quot;480&quot; alt=&quot;测试懒加载图片&quot;/&gt;</div><div class="line">&lt;/section&gt;</div></pre></td></tr></table></figure>
<h5 id="javascript"><a href="#javascript" class="headerlink" title="javascript"></a>javascript</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;script src=&quot;jquery.min.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script src=&quot;jquery.lazyload.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script&gt;</div><div class="line">    $(&quot;img.lazy-load&quot;).lazyload(&#123; </div><div class="line">    effect : &quot;fadeIn&quot;, //渐现，show(直接显示),fadeIn(淡入),slideDown(下拉)</div><div class="line">　　threshold : 180, //预加载，在图片距离屏幕180px时提前载入</div><div class="line">　　event: &apos;click&apos;,  //事件触发时才加载，click(点击),mouseover(鼠标划过),sporty(运动的),默认为scroll（滑动）</div><div class="line">　　container: $(&quot;#container&quot;), // 指定对某容器中的图片实现效果</div><div class="line">　　failure_limit：2 //加载2张可见区域外的图片,lazyload默认在找到第一张不在可见区域里的图片时则不再继续加载,但当HTML容器混乱的时候可能出现可见区域内图片并没加载出来的情况</div><div class="line">&#125;);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>2.echo.js<br>下载地址：<a href="https://github.com/helijun/helijun/tree/master/plugin/echo" target="_blank" rel="external">https://github.com/helijun/helijun/tree/master/plugin/echo</a></p>
<h5 id="css"><a href="#css" class="headerlink" title="css"></a>css</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">　　.demo img &#123; </div><div class="line">　　　　width: 736px; </div><div class="line">　　　　height: 490px; </div><div class="line">　　　　background: url(images/loading.gif) 50% no-repeat;</div><div class="line">　　&#125;</div><div class="line">&lt;/style&gt;</div></pre></td></tr></table></figure>
<h5 id="html-1"><a href="#html-1" class="headerlink" title="html"></a>html</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div class=&quot;demo&quot;&gt;</div><div class="line">    &lt;img class=&quot;lazy&quot; src=&quot;images/blank.gif&quot; data-echo=&quot;images/big-1.jpg&quot;&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<h5 id="js"><a href="#js" class="headerlink" title="js"></a>js</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;script src=&quot;js/echo.min.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script&gt;</div><div class="line">  Echo.init(&#123;</div><div class="line">    offset: 0,//离可视区域多少像素的图片可以被加载</div><div class="line">    throttle: 0 //图片延时多少毫秒加载</div><div class="line">  &#125;); </div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/08/vue-router-js/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zongyi Yin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blog_photo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/08/vue-router-js/" itemprop="url">vue-router.js</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-08T01:51:27+08:00">
                2017-12-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="对地址变更的监听"><a href="#对地址变更的监听" class="headerlink" title="对地址变更的监听"></a>对地址变更的监听</h3><p>对于 <code>HashHistory</code> 模式（也就是基于页面地址的 hash 部分来实现路由功能，如 <code>http://example.com/path#/foo</code>、<code>http://example.com/path#/bar</code>），是通过监听 <code>hashChange</code> 事件来实现：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//2258</div><div class="line">window.addEventListener(supportsPushState ? &apos;popstate&apos; : &apos;hashchange&apos;, function () &#123;</div><div class="line"></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>这个是在 router.init()（源码2503 <code>history.setupListeners();</code>）中调用的，而 router.init() 则是在根组件创建时（源码546 <code>this._router.init(this);</code>）调用的。<br>router.init()调用,通过 Vue.mixin() 注册了一个 beforeCreate() 钩子函数，从而在之后所有的 Vue 组件创建时都会调用该钩子函数，检查是否有 router 参数，从而进行初始化的机会。进而通过层层调用执行了监听 hashchange 事件的动作。</p>
<h3 id="地址变更通知到-vm"><a href="#地址变更通知到-vm" class="headerlink" title="地址变更通知到 vm"></a>地址变更通知到 vm</h3><p>这个过程是hashchange 时，执行（源码2507） history.transitionTo(…)，在这个过程中，会进行地址匹配，得到一个对应当前地址的 route，然后将其设置到对应的 vm._route 上。</p>
<p>###地址变更同步到视图更新<br>vm._route 已经接收到路由的变更，从而触发视图更新。而当视图更新进一步调用到 <code>&lt;router-view&gt;</code> 的 render() 时，即进入了<code>&lt;router-view&gt;</code>的处理（源码39）</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/blog_photo.jpg"
                alt="zongyi Yin" />
            
              <p class="site-author-name" itemprop="name">zongyi Yin</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
    <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=450 src="//music.163.com/outchain/player?type=2&id=32192436&auto=1&height=32"></iframe>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zongyi Yin</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  









<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>



  





  

  

  

  
  

  

  

  

</body>
</html>
